"use strict";(self.webpackChunkdash_core_components=self.webpackChunkdash_core_components||[]).push([[746],{19979:function(e,t,r){r.r(t),r.d(t,{default:function(){return L}});var n=r(48136),i=r(51609),a=r.n(i),s=r(91487),o=r(51647),l=r(71298),u=r(1322),h=r(18851),c=r(92234),p=r(75647),d=r(84165),v=r(76120),f=r.n(v),y=r(24203),g=r(4459),m=e=>{var t,r=e.onResize,n=e.children,s=e.targets,o=(0,i.createRef)(),l=(0,i.useCallback)((()=>{t&&clearTimeout(t),t=setTimeout((()=>{r(!0)}),50)}),[r]),u=(0,i.useMemo)((()=>new ResizeObserver(l)),[r]);return(0,i.useEffect)((()=>o.current?(s.forEach((e=>u.observe(e.current))),u.observe(o.current),()=>{u.disconnect()}):()=>{}),[o.current]),a().createElement("div",{ref:o},n)};m.propTypes={onResize:f().func,children:f().node,targets:f().any};var b=m;function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var j={autosize:!0,height:void 0,width:void 0},D={},w={autosize:!1},E={responsive:!0},N={},R={responsive:!1},C=(e,t,r)=>{var n;if((0,s.A)(r,["click","hover","selected"])){var i=[];if((0,o.A)(t))return null;for(var a=e.data,c=function(){var e=t.points[p],r=(0,l.A)((function(e){return!(0,s.A)((0,u.A)(e),["Object","Array"])}),e);(0,h.A)("bbox",e)&&(r.bbox=e.bbox),(0,h.A)("curveNumber",e)&&(0,h.A)("customdata",a[r.curveNumber])&&((0,h.A)("pointNumber",e)?"number"==typeof e.pointNumber?r.customdata=a[r.curveNumber].customdata[e.pointNumber]:!e.pointNumber&&e.data.mode.includes("lines")&&(r.customdata=a[r.curveNumber].customdata):(0,h.A)("pointNumbers",e)&&(r.customdata=e.pointNumbers.map((function(e){return a[r.curveNumber].customdata[e]})))),(0,h.A)("pointNumbers",e)&&(r.pointNumbers=e.pointNumbers),i[p]=r},p=0;p<t.points.length;p++)c();n={points:i}}else"relayout"!==r&&"restyle"!==r||(n=t);return(0,h.A)("range",t)&&(n.range=t.range),(0,h.A)("lassoPoints",t)&&(n.lassoPoints=t.lassoPoints),n};class x extends i.Component{constructor(e){super(e),this.gd=a().createRef(),this._hasPlotted=!1,this._prevGd=null,this._queue=Promise.resolve(),this.parentElement=a().createRef(),this.bindEvents=this.bindEvents.bind(this),this.getConfig=this.getConfig.bind(this),this.getConfigOverride=this.getConfigOverride.bind(this),this.getLayout=this.getLayout.bind(this),this.getLayoutOverride=this.getLayoutOverride.bind(this),this.graphResize=this.graphResize.bind(this),this.isResponsive=this.isResponsive.bind(this),this.amendTraces=this.amendTraces.bind(this),this.state={override:{},originals:{}}}plot(e){var t,r,i,a=e.figure,s=e.config,o=e.animate,l=e.animation_options,u=e.responsive,h=e.mathjax,c=this.gd.current;a=e._dashprivate_transformFigure(a,c),s=e._dashprivate_transformConfig(s,c);var p=this.getConfig(s,u);p.typesetMath=h;var d={data:null===(t=a)||void 0===t?void 0:t.data,layout:this.getLayout(null===(r=a)||void 0===r?void 0:r.layout,u),frames:null===(i=a)||void 0===i?void 0:i.frames,config:p};return o&&this._hasPlotted&&a.data.length===c.data.length?a.frames?Plotly.deleteFrames(c).then((()=>Plotly.addFrames(c,a.frames))).then((()=>Plotly.animate(c,d,l))):Plotly.animate(c,d,l):(c.classList.add("dash-graph--pending"),(0,n.A)(h).then((()=>{var e=this.gd.current;return e&&Plotly.react(e,d)})).then((()=>{var e=this.gd.current;e&&(e.classList.remove("dash-graph--pending"),this._hasPlotted&&e!==this._prevGd&&(this._prevGd&&this._prevGd.removeAllListeners&&(this._prevGd.removeAllListeners(),Plotly.purge(this._prevGd)),this._hasPlotted=!1),this._hasPlotted||(this.bindEvents(),this.graphResize(!0),this._hasPlotted=!0,this._prevGd=e))})))}amendTraces(e,t,r){var n=t.prependData,i=t.extendData,a=r.prependData,s=r.extendData,o=this;function l(e,t,r){var n=e.clearState,i=e[t],a=Promise.resolve();return i.forEach((e=>{var t,n,i,s,l;if(Array.isArray(e)&&"object"==typeof e[0]){var u=(l=3,function(e){if(Array.isArray(e))return e}(s=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}(s,l)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(s,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());t=u[0],n=u[1],i=u[2]}else t=e;if(!n){function h(e){return e[Object.keys(e)[0]]}function c(e){return Array.from(Array(h(e).length).keys())}n=c(t)}a=a.then((()=>{var e=o.gd.current;return e&&Plotly[r](e,t,n,i)}))})),a.then((()=>n(t)))}var u=!1;return null!=a&&a.length&&n!==a&&(u=!0,e=e.then((()=>l(r,"prependData","prependTraces")))),null!=s&&s.length&&i!==s&&(u=!0,e=e.then((()=>l(r,"extendData","extendTraces")))),u&&(e=e.then((()=>r._dashprivate_onFigureModified(r.figure)))),e}getConfig(e,t){return(0,c.A)(e,this.getConfigOverride(t))}getLayout(e,t){if(!e)return e;var r=this.getLayoutOverride(t),n=this.state,i=n.override,a=n.originals,s={};for(var o in r)e[o]!==i[o]?s[o]=e[o]:a.hasOwnProperty(o)&&(s[o]=a[o]);for(var l in this.setState({override:r,originals:s}),a)e[l]===i[l]&&(e[l]=a[l]);for(var u in r)e[u]=r[u];return e}getConfigOverride(e){switch(e){case!1:return R;case!0:return E;default:return N}}getLayoutOverride(e){switch(e){case!1:return w;case!0:return j;default:return D}}isResponsive(e){var t=e.config,r=e.figure,n=e.responsive;return"Boolean"===(0,u.A)(n)?n:Boolean(t.responsive&&(!r.layout||(r.layout.autosize||(0,o.A)(r.layout.autosize))&&((0,o.A)(r.layout.height)||(0,o.A)(r.layout.width))))}graphResize(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.isResponsive(this.props)){var e=this.gd.current;e&&(e.classList.add("dash-graph--pending"),Plotly.Plots.resize(e).catch((()=>{})).finally((()=>e.classList.remove("dash-graph--pending"))))}}bindEvents(){var e=this.props,t=e.setProps,r=e.clear_on_unhover,n=e.relayoutData,i=e.restyleData,a=e.hoverData,s=e.selectedData,l=this.gd.current;l.on("plotly_click",(e=>{var r=C(l,e,"click");(0,o.A)(r)||t({clickData:r})})),l.on("plotly_clickannotation",(e=>{var r=(0,p.A)(["event","fullAnnotation"],e);t({clickAnnotationData:r})})),l.on("plotly_hover",(e=>{var r=C(l,e,"hover");(0,o.A)(r)||(0,d.A)(r,a)||t({hoverData:r})})),l.on("plotly_selected",(e=>{var r=C(l,e,"selected");(0,o.A)(r)||(0,d.A)(r,s)||t({selectedData:r})})),l.on("plotly_deselect",(()=>{t({selectedData:null})})),l.on("plotly_relayout",(e=>{var r=C(l,e,"relayout");(0,o.A)(r)||(0,d.A)(r,n)||t({relayoutData:r})})),l.on("plotly_restyle",(e=>{var r=C(l,e,"restyle");(0,o.A)(r)||(0,d.A)(r,i)||t({restyleData:r})})),l.on("plotly_unhover",(()=>{r&&t({hoverData:null})}))}componentDidMount(){var e=this.plot(this.props);this._queue=this.amendTraces(e,{},this.props)}componentWillUnmount(){var e=this.gd.current;e&&e.removeAllListeners&&(e.removeAllListeners(),this._hasPlotted&&Plotly.purge(e))}shouldComponentUpdate(e){return this.props.id!==e.id||JSON.stringify(this.props.style)!==JSON.stringify(e.style)}UNSAFE_componentWillReceiveProps(e){if(this.props.id===e.id){var t=this._queue;this.props.mathjax===e.mathjax&&this.props.figure===e.figure&&this.props._dashprivate_transformConfig===e._dashprivate_transformConfig&&this.props._dashprivate_transformFigure===e._dashprivate_transformFigure||(t=t.then((()=>this.plot(e)))),this._queue=this.amendTraces(t,this.props,e)}}componentDidUpdate(e){e.id===this.props.id&&e.mathjax===this.props.mathjax||(this._queue=this._queue.then((()=>this.plot(this.props))))}render(){var e=this.props,t=e.className,r=e.id,n=e.style;return a().createElement(g.A,{id:r,key:r,className:t,style:n,ref:this.parentElement},a().createElement(b,{onResize:this.graphResize,targets:[this.parentElement,this.gd]}),a().createElement("div",{ref:this.gd,style:{height:"100%",width:"100%"}}))}}x.propTypes=A(A({},y.VZ),{},{prependData:f().arrayOf(f().oneOfType([f().array,f().object])),extendData:f().arrayOf(f().oneOfType([f().array,f().object])),clearState:f().func.isRequired}),x.defaultProps=A(A({},y.Sb),{},{prependData:[],extendData:[]});var L=x}}]);
//# sourceMappingURL=async-graph.js.map